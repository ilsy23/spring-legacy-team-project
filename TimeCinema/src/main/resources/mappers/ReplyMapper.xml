<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
    
<mapper namespace="com.spring.timecinema.reply.mapper.IReplyMapper">

<insert id="registReply">
    INSERT INTO reply (row_num, user_id, reply_no, content)
        VALUES (#{rowNum}, #{userId}, reply_seq.nextval, #{content})
</insert>

<select id="getList" resultType="reply">
    SELECT
        r.row_num, r.user_id, r.reply_no, r.content, r.reg_date, u.user_name
    FROM reply r
        LEFT JOIN users u
            ON r.user_id = u.user_id
        WHERE r.row_num = #{rowNum}
</select>

</mapper>